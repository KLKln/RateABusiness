@model IEnumerable<RateABusiness.ViewModel.ReviewViewModel>
@{
    ViewBag.Title = "ShowReview";
}

<script type="text/javascript">
    function CRateOut(rating) {
        for (var i = 1; i <= rating; i++) {
            $("#span" + i).attr('class', "glyphicon glyphicon-star-empty");
        }
        
    }

    function CRateOver(rating) {
        for (var i = 1; i <= rating; i++) {
            $("#span" + i).attr('class', "glyphicon glyphicon-star");
        }
    }

    function CRateClick(rating) {
        $("#lblRating").val(rating);
        for (var i = 1; i <= rating; i++) {
            $("#span" + i).attr('class', "glyphicon glyphicon-star");
        }
        for (var i = rating + 1; i <= 10; i++) {
            $("#span" + i).attr('class', "glyphicon glyphicon-star-empty");
        }
    }

    function CRateSelected() {
        var rating = $("#lblRating").val();
        for (var i = 1; i < rating; i++) {
            $("#span" + i).attr('class', "glyphicon glyphicon-star");
        }
    }

    function VerifyRating() {
        var rating = $("#lblRating").val();
        if (rating == 0) {
            alert("Please select number of stars you give the business");
            return false;
        }
    }

</script>

<h2>Business Review</h2>
@foreach (var item in Model)
{
    @Html.Partial("_ReviewPartial", item)
}

<h3>Please enter comments here:</h3>

@using (Html.BeginForm("AddComment", "Home", FormMethod.Post, new {onsubmit = "return VerifyRating()"}))
{
    <textarea rows="6" , cols="50" name="ReviewComment" id="txtReviewComment"></textarea>
    <div onmouseout="CRateSelected()">
        <span id="span1" onmouseout="CRateOut(1)" onmouseover="CRateOver(1)" onclick="CRateClick(1)" class="glyphicon glyphicon-star-empty"></span>
        <span id="span2" onmouseout="CRateOut(2)" onmouseover="CRateOver(2)" onclick="CRateClick(2)" class="glyphicon glyphicon-star-empty"></span>
        <span id="span3" onmouseout="CRateOut(3)" onmouseover="CRateOver(3)" onclick="CRateClick(3)" class="glyphicon glyphicon-star-empty"></span>
        <span id="span4" onmouseout="CRateOut(4)" onmouseover="CRateOver(4)" onclick="CRateClick(4)" class="glyphicon glyphicon-star-empty"></span>
        <span id="span5" onmouseout="CRateOut(5)" onmouseover="CRateOver(5)" onclick="CRateClick(5)" class="glyphicon glyphicon-star-empty"></span>
        <span id="span6" onmouseout="CRateOut(6)" onmouseover="CRateOver(6)" onclick="CRateClick(6)" class="glyphicon glyphicon-star-empty"></span>
        <span id="span7" onmouseout="CRateOut(7)" onmouseover="CRateOver(7)" onclick="CRateClick(7)" class="glyphicon glyphicon-star-empty"></span>
        <span id="span8" onmouseout="CRateOut(8)" onmouseover="CRateOver(8)" onclick="CRateClick(8)" class="glyphicon glyphicon-star-empty"></span>
        <span id="span9" onmouseout="CRateOut(9)" onmouseover="CRateOver(9)" onclick="CRateClick(9)" class="glyphicon glyphicon-star-empty"></span>
        <span id="span10" onmouseout="CRateOut(10)" onmouseover="CRateOver(10)" onclick="CRateClick(10)" class="glyphicon glyphicon-star-empty"></span>
    </div>

    <div>
        <input type="hidden" name="rating" id="lblRating" value="0" />
        <div>
            <input type="hidden" name="businessId" id="lblRating" value="@ViewBag.BusinessId"/>
        </div>
    </div>

    <div>
        <input type="submit" class="btn btn-primary active" name="Save" value="Save" />
    </div>
}
